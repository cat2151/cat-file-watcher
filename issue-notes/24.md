# issue tomlで時間帯を指定すると、その時間帯でのみファイル監視を行うようにする #24
[issues #24](https://github.com/cat2151/cat-file-watcher/issues/24)

## 結論 / Conclusion

時間帯指定機能を実装しました。時間帯はTOMLで定義し、ファイルごとに時間帯の名前で指定できます。23:59～00:01のような日をまたぐ指定も可能です。

Implemented time period feature. Time periods are defined in TOML and files can specify a time period by name. Day-spanning periods (e.g., 23:59-00:01) are supported.

## 実装内容 / Implementation

1. **新しいモジュール**: `src/time_period_checker.py`
   - 時間帯のパースと検証ロジック
   - 日をまたぐ時間帯のサポート
   - 現在時刻が時間帯内かどうかの判定

2. **設定フォーマット** (TOML):
   ```toml
   [time_periods]
   business_hours = { start = "09:00", end = "17:00" }
   night_shift = { start = "23:00", end = "01:00" }  # 日をまたぐ
   
   [files]
   "file.txt" = { command = "echo test", time_period = "business_hours" }
   ```

3. **主な変更**:
   - `cat_file_watcher.py`: 時間帯チェックを`_check_files()`に追加
   - `__init__.py`: `TimePeriodChecker`をエクスポート
   - `config.example.toml`: 時間帯の使用例を追加

## テスト / Tests

13個の新しいテストを追加（すべて成功）:
- 時刻文字列のパース（有効/無効）
- 通常の時間帯チェック（日をまたがない）
- 日をまたぐ時間帯チェック
- 特定のエッジケース（23:59～00:01）
- 時間帯設定の取得
- ファイル監視判定ロジック
- FileWatcherとの統合

全テスト: 53個（40個既存 + 13個新規）すべて成功

## 動作 / Behavior

- `time_period`が指定されていない場合、常にファイルを監視します
- 指定された時間帯内の場合のみ、ファイルの変更を監視します
- 時間帯外の場合、そのファイルの監視をスキップします
- 無効な時間帯名の場合、警告を表示して監視を続行します
- 日をまたぐ時間帯（例: 23:00-01:00）を正しく処理します

## 後方互換性 / Backward Compatibility

既存の設定ファイルは変更なしで動作します。`time_periods`セクションと`time_period`パラメータはオプションです。

