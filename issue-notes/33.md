# issue 既存log fileとは別の、新たなlog fileを追加する。「process nameで正規表現で指定したprocessが存在しているためcommandを実行しなかった」ときのlogである。log filenameをtomlで定義する。用途は、正規表現ミスの検知など用である。log内容は、時刻と、そのprocess name正規表現と、matchした実際のprocess nameである #33
[issues #33](https://github.com/cat2151/cat-file-watcher/issues/33)

## 実装内容

### 概要
コマンドの実行がプロセス抑制（`suppress_if_process`）によってスキップされた際に、その情報を記録する新しいログファイル機能を追加しました。これにより、正規表現パターンのミスや、意図しないプロセスマッチングを検知することができます。

### 変更箇所

1. **グローバル設定（config.toml）**
   - `suppression_log_file`: プロセス抑制ログファイルのパス（省略可）

2. **ログの内容**
   - タイムスタンプ: `[YYYY-MM-DD HH:MM:SS]` 形式
   - ファイルパス: 変更が検知されたファイルのパス
   - プロセスパターン: 正規表現パターン（`suppress_if_process` の値）
   - マッチしたプロセス: 実際にマッチしたプロセス名またはコマンドライン

### コード変更

1. **src/process_detector.py**
   - `get_matching_process()` メソッドを追加: マッチしたプロセス名を返す新しいメソッド
   - `is_process_running()` を変更: 内部で `get_matching_process()` を呼び出すように変更

2. **src/command_executor.py**
   - `execute_command()` を変更: プロセス抑制時に `_write_to_suppression_log()` を呼び出すように変更
   - `_write_to_suppression_log()` メソッドを追加: 抑制ログファイルへの書き込みを実装

3. **examples/config.example.toml**
   - `suppression_log_file` の設定例とコメントを追加

4. **tests/test_suppression_logging.py**
   - 抑制ログ機能の包括的なテストを追加:
     - 有効時のログ記録
     - 無効時のログ非記録
     - 抑制が発生しない場合のログ非記録
     - 複数回の抑制の記録
     - タイムスタンプフォーマットの検証

### ログファイル例

```
[2025-10-11 00:22:26] File: test.txt
  Process pattern: python
  Matched process: /usr/bin/python3 /usr/bin/networkd-dispatcher --run-startup-triggers

[2025-10-11 00:22:30] File: config.json
  Process pattern: vim|emacs|code
  Matched process: code

```

### 検証

- すべての既存テスト（80テスト）が成功
- 新しいテスト（5テスト）が成功
- 手動テストで以下を確認:
  - プロセス抑制時にログファイルが作成される
  - ログファイルに正しい形式でデータが記録される
  - `suppression_log_file` が未設定の場合はログが記録されない
  - 複数回の抑制が正しく追記される

### 結論

実装完了。Issue #33の要件をすべて満たしています。
