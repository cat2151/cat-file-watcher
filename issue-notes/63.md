# issue print処理すべて、先頭に時刻を表示する。tomlでoff可能にする。デフォルトはon #63
[issues #63](https://github.com/cat2151/cat-file-watcher/issues/63)

## 結論 / Conclusion

すべてのprint処理に時刻表示を追加しました。TOML設定ファイルで`enable_timestamp`オプションを使用してon/offを切り替えることができます。デフォルトはonです。

Added timestamp display to all print statements. Can be toggled on/off using the `enable_timestamp` option in TOML configuration file. Default is on.

## 実装内容 / Implementation

### 新しいモジュール / New Module

1. **`src/timestamp_printer.py`**: タイムスタンプ付き出力を提供する新しいモジュール
   - `TimestampPrinter.print()`: タイムスタンプ付きでメッセージを出力
   - `TimestampPrinter.set_enable_timestamp()`: タイムスタンプの有効/無効を設定
   - タイムスタンプフォーマット: `[YYYY-MM-DD HH:MM:SS]`

### 変更箇所 / Modified Files

1. **`src/__init__.py`**:
   - `TimestampPrinter`をエクスポートリストに追加

2. **`src/cat_file_watcher.py`**:
   - `timestamp_printer`モジュールをインポート
   - `__init__`メソッドで設定ファイルから`enable_timestamp`を読み込み
   - すべての`print()`呼び出しを`TimestampPrinter.print()`に置き換え

3. **`src/command_executor.py`**:
   - `timestamp_printer`モジュールをインポート
   - すべての`print()`呼び出しを`TimestampPrinter.print()`に置き換え

4. **`src/config_loader.py`**:
   - `timestamp_printer`モジュールをインポート
   - すべての`print()`呼び出しを`TimestampPrinter.print()`に置き換え

5. **`src/time_period_checker.py`**:
   - `timestamp_printer`モジュールをインポート
   - すべての`print()`呼び出しを`TimestampPrinter.print()`に置き換え

6. **`examples/config.example.toml`**:
   - `enable_timestamp`設定オプションの説明とコメント例を追加

## テスト / Tests

新しいテストファイル`tests/test_timestamp.py`を作成し、以下のテストケースを追加:

- タイムスタンプがデフォルトで有効であることを確認
- タイムスタンプを無効にできることを確認
- タイムスタンプフォーマットが正しいことを確認
- 設定ファイルでタイムスタンプをデフォルトで有効にできることを確認
- 設定ファイルでタイムスタンプを明示的に有効にできることを確認
- 設定ファイルでタイムスタンプを無効にできることを確認
- 様々なメッセージタイプでタイムスタンプが表示されることを確認

すべてのテストが成功（131テスト合格）

## 後方互換性 / Backward Compatibility

- 既存の設定ファイルでは`enable_timestamp`が指定されていない場合、デフォルトで`true`となります
- 既存の動作に影響を与えず、タイムスタンプが自動的に追加されます
- 必要に応じて`enable_timestamp = false`を設定することで無効化できます

## 使用例 / Usage Example

### タイムスタンプを有効にする（デフォルト）

```toml
# config.toml
default_interval = "1s"

[files]
"test.txt" = { command = "echo test" }
```

出力例:
```
[2025-10-11 23:20:53] Starting file watcher with config: config.toml
[2025-10-11 23:20:53] Checking for changes every 1.0 second(s)...
[2025-10-11 23:20:53] Press Ctrl+C to stop.
[2025-10-11 23:20:53] Started monitoring 'test.txt'
```

### タイムスタンプを明示的に有効にする

```toml
# config.toml
default_interval = "1s"
enable_timestamp = true

[files]
"test.txt" = { command = "echo test" }
```

### タイムスタンプを無効にする

```toml
# config.toml
default_interval = "1s"
enable_timestamp = false

[files]
"test.txt" = { command = "echo test" }
```

出力例（タイムスタンプなし）:
```
Starting file watcher with config: config.toml
Checking for changes every 1.0 second(s)...
Press Ctrl+C to stop.
Started monitoring 'test.txt'
```
