# issue 一度offにしていたpylintについて、Ruffが検知できないlinter errorを検知できるか試すためonにし、.pylintrcを他のprojectから持ってくる #62
[issues #62](https://github.com/cat2151/cat-file-watcher/issues/62)

# 何が困るの？
- 既存の他のprojectは、Pylintで、かなり厳しめのlintをかけていた
  - それは学びを得られるメリットがあった
  - ただしagentにPylint合格を指示するとハルシネーションが多く、体験は悪かった
- このprojectでPylintをかけるとどうなるか？の知識がない
  - 知識がないので多少迷子になる

# 対策
- ひとまずPylintをかけてみる。.pylintrcは既存の他のprojectから持ってくる

# 結果
- 大雑把すぎるexceptionなどのlinter errorが出た

# 対策
## Claudeにきいてみた：
### user
- pythonのprojectで、
  - linterはRuffだけで運用してるとこがある。
  - githubのagentが生成してくるcodeも、
    - Ruffのlintは通る。
- さて、ここでlocalのvscodeにpylintを入れてみた。
  - すると、未使用変数や、大雑把すぎるexceptionのlinter errorが出た。
- これは悩む。
- github のagentに、これらのlinter errorを、うまく自動修正させる方法はあるだろうか？
  - 特にexceptionについては、ハルシネーションで、誤った修正をしてきそうだ。
- 別の選択肢としては、
  - pylintを使わない、というものがある。
- githubのagentに実装の大部分をやらせる場合のlinterのベストプラクティスは、
  - ruffだけにして、pylintを外す、がよいだろうか？
### Claude
- よくきたな。
- お前の状況はよくわかる。おれの見解を述べよう。
- Pylintを外すのが正解である
- 理由は明確だ。
  - GitHub Copilotなどのコード生成AIは、Ruffのような高速で実用的なlinterには対応できるが、Pylintの細かすぎるルールには対応していない。お前がローカルでPylintを入れた途端にエラーが出るのは当然で、
  - これはツールチェーンの不整合という最悪の状態だ。
- おれが問題だと考えるのは以下の点だ:
  - CIで通るコードがローカルで弾かれる - これは開発体験として最悪である。開発者は何を信じればいいのかわからなくなる。
  - AIエージェントとの相性 - お前の懸念は正しい。特にexception処理について、AIに「except Exception:をexcept ValueError:に変えろ」と言わせると、実際にはKeyErrorも飛んでくるコードで壊滅的なバグを生む。ハルシネーションのリスクが高すぎる。
  - Ruffの進化 - Ruffは現代的なPythonプロジェクトのために設計されており、Pylintのルールの多くをカバーしている。未使用変数もRuffで検出できる(pyflakesルールセット)。
- おれの推奨する対応
  - Ruff一本に統一しろ - ruff check --select F,E,W,Iあたりで十分である
  - CIとローカルを完全一致させろ - .vscode/settings.jsonでPylintを無効化し、Ruffのみ有効にする
  - どうしてもPylintのルールが欲しいなら、Ruffの設定で該当するルールを有効にできないか確認しろ
- ただし1つだけ問いたい - お前はなぜPylintを入れたのだ? 既存のRuffで何か不足を感じたのか、それとも習慣でなんとなく入れただけか? この答えによっては、Ruffの設定を見直す方向もあり得る。
### user
- 習慣だ。
  - 別projectでは、github のagentを使わずに、localのvscodeのagentに細かくlinter errorの修正までさせている。
    - そこでの体験はあまりよくない。
    - ただ、人力で私が修正するときにpylintは学びを得るチャンスではあると思っている。
- 現状、あなたの指摘は正しそうに見える。
### Claude
- よくきたな。
- お前の状況が完全に理解できた。おれの判断を述べる。
  - Pylintは学習用ツールとして残せ
    - お前は重要なことを言った。「人力で修正するときにPylintは学びを得るチャンス」である。これは正しい認識だ。
  - おれが提案するのは以下の運用である:
    - CIとチーム標準はRuffのみ
      - これは絶対に譲ってはならない。GitHub Agentが生成するコードの品質基準はRuffで統一する。
    - Pylintは個人のローカル環境でのみ使う
      - .vscode/settings.jsonをプロジェクトに含めず、個人の設定として入れる。
      - あるいは、プロジェクトの設定では無効にしておき、
      - **お前が学びたいときだけ手動で有効にする。**
    - 重要な分離
      - 「AIエージェントに修正させるエラー(Ruff)」と「人間が学ぶためのヒント(Pylint)」を明確に分ける。AIにPylintのエラーを修正させようとするから体験が悪くなるのだ。
- おれの結論
  - お前がやるべきことはこうだ:
    - **プロジェクトのlinter標準はRuffのみに統一しろ**
    - Pylintは個人の学習ツールとして、エディタ上での警告表示のみに使え
    - Pylintのエラーを自動修正させようとするな。見て学べ。気になったら人力で直せ。
  - 習慣で入れたツールに振り回されるのは時間の無駄である。目的を明確にして使い分けろ。おれはこの方針が最も合理的だと考える。

# 対策
- 以下のVSCode設定にする：
  - Ruff : このWorkspaceに限ってON
  - Pylint : このWorkspaceに限ってOFF、**学びたいときだけ手動でON**

# closeとする
