# issue VSCode settings json（linter、formatter、test等）と、.editorconfig をsetupする。狙いは、localでuserがソースコードリーディングや人力code修正や単体テストを円滑に行うようにするためである #41
[issues #41](https://github.com/cat2151/cat-file-watcher/issues/41)

## 概要 / Summary

ローカル開発環境でのコードリーディング、コード修正、単体テストを円滑に行うために、VSCode設定ファイルと.editorconfigを追加しました。

Added VSCode settings and .editorconfig to facilitate code reading, manual code modifications, and unit testing in local development environments.

## 実装内容 / Implementation

### 1. **VSCode設定ファイル** / VSCode Settings

`.vscode/settings.json` を作成し、以下の設定を追加:

- **言語サーバー** / Language Server: Pylance（型チェック、自動インポート補完）
- **リンター** / Linter: Ruff（モダンで高速なPythonリンター）
- **フォーマッター** / Formatter: Ruff（自動フォーマット、保存時に実行）
- **テスト** / Testing: pytest（自動テスト検出、保存時に検出）
- **エディター設定** / Editor Settings:
  - 行長: 120文字
  - タブサイズ: 4スペース
  - 末尾の空白を自動削除
  - 改行コード: LF（Unix形式）

### 2. **EditorConfig**

`.editorconfig` を作成し、エディター間で一貫した設定を提供:

- **すべてのファイル**: UTF-8、LF改行、末尾の空白削除
- **Pythonファイル**: 4スペースインデント、最大行長120
- **TOMLファイル**: 2スペースインデント
- **Markdown/YAML/JSONファイル**: 2スペースインデント

### 3. **Ruff設定ファイル**

`ruff.toml` を作成し、プロジェクト固有の設定を定義:

- 行長: 120文字
- 有効なルール: pycodestyle (E), Pyflakes (F), warnings (W), isort (I)
- 除外ディレクトリ: .venv, __pycache__, .pytest_cache等
- フォーマット: ダブルクォート、スペースインデント、LF改行

### 4. **開発用依存関係**

`dev-requirements.txt` を作成し、開発ツールを追加:

- ruff >= 0.6.0 (リンター・フォーマッター)
- mypy >= 1.0.0 (型チェッカー、オプション)
- types-toml >= 0.10.0 (toml用の型定義)

## 使い方 / Usage

### VSCode拡張機能のインストール / Install VSCode Extensions

以下の拡張機能をインストールしてください:

1. **Python** (ms-python.python) - 公式Python拡張機能
2. **Pylance** (ms-python.vscode-pylance) - 高速な言語サーバー
3. **Ruff** (charliermarsh.ruff) - リンター・フォーマッター
4. **EditorConfig for VS Code** (editorconfig.editorconfig) - EditorConfig対応

### 開発用依存関係のインストール / Install Development Dependencies

```bash
pip install -r dev-requirements.txt
```

### 設定の動作確認 / Verify Settings

1. Pythonファイルを開くと、Pylanceが型チェックを実行します
2. ファイル保存時に、Ruffが自動的にコードをフォーマットします
3. テストビューで、pytest テストが自動的に検出されます
4. 問題パネルで、リンターの警告が表示されます

### リンターの手動実行 / Manual Linting

```bash
# コード全体をチェック
ruff check src/ tests/

# 自動修正可能な問題を修正
ruff check --fix src/ tests/

# フォーマットのみ実行
ruff format src/ tests/
```

## 設定の詳細 / Configuration Details

### Ruffの利点 / Benefits of Ruff

Ruffは、以下の理由で選択されました:

- **高速**: Rustで書かれており、flake8やblackより10-100倍高速
- **統合**: リンターとフォーマッターが一体化
- **モダン**: Python 3.12+の最新機能に対応
- **互換性**: flake8、black、isortのルールと互換性あり

### 行長120文字の理由 / Why 120 Characters

- PEP 8では79文字を推奨していますが、モダンなディスプレイでは120文字が一般的
- GitHub、GitLabのコードビューでも120文字は読みやすい
- プロジェクトの既存コードも120文字を許容している

## 既存コードへの影響 / Impact on Existing Code

- **既存コードは変更していません**: この設定は新規開発およびコード修正時に適用されます
- **段階的な適用**: ファイルを編集する際に、保存時に自動フォーマットされます
- **テストは全て通過**: 93テスト全てが成功しています

## 参考 / References

- [Ruff Documentation](https://docs.astral.sh/ruff/)
- [EditorConfig](https://editorconfig.org/)
- [VSCode Python Extension](https://marketplace.visualstudio.com/items?itemName=ms-python.python)
- [PEP 8 Style Guide](https://peps.python.org/pep-0008/)

